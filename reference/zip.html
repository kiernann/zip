<!-- Generated by pkgdown: do not edit by hand -->
<!DOCTYPE html>
<html lang="en">
  <head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>Compress Files into 'zip' Archives — zip • zippr</title>

<!-- favicons -->
<link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png" />
<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png" />
<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png" />
<link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png" />

<!-- jquery -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script>
<!-- Bootstrap -->

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous" />

<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script>

<!-- bootstrap-toc -->
<link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script>

<!-- Font Awesome icons -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous" />

<!-- clipboard.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script>

<!-- headroom.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script>

<!-- pkgdown -->
<link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script>




<meta property="og:title" content="Compress Files into 'zip' Archives — zip" />
<meta property="og:description" content="zip() creates a new zip archive file." />
<meta property="og:image" content="/logo.png" />




<!-- mathjax -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script>

<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->



  </head>

  <body data-spy="scroll" data-target="#toc">
    <div class="container template-reference-topic">
      <header>
      <div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">zippr</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.0.0.9000</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="../index.html">
    <span class="fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="https://github.com/kiernann/zippr/">
    <span class="fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
      
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header>

<div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Compress Files into 'zip' Archives</h1>
    <small class="dont-index">Source: <a href='https://github.com/kiernann/zippr/blob/master/R/zip.R'><code>R/zip.R</code></a></small>
    <div class="hidden name"><code>zip.Rd</code></div>
    </div>

    <div class="ref-description">
    <p><code>zip()</code> creates a new zip archive file.</p>
    </div>

    <pre class="usage"><span class='fu'>zip</span><span class='op'>(</span>
  <span class='va'>zipfile</span>,
  <span class='va'>files</span>,
  recurse <span class='op'>=</span> <span class='cn'>TRUE</span>,
  compression_level <span class='op'>=</span> <span class='fl'>9</span>,
  include_directories <span class='op'>=</span> <span class='cn'>TRUE</span>,
  root <span class='op'>=</span> <span class='st'>"."</span>,
  mode <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='st'>"mirror"</span>, <span class='st'>"cherry-pick"</span><span class='op'>)</span>
<span class='op'>)</span>

<span class='fu'>zipr</span><span class='op'>(</span>
  <span class='va'>zipfile</span>,
  <span class='va'>files</span>,
  recurse <span class='op'>=</span> <span class='cn'>TRUE</span>,
  compression_level <span class='op'>=</span> <span class='fl'>9</span>,
  include_directories <span class='op'>=</span> <span class='cn'>TRUE</span>,
  root <span class='op'>=</span> <span class='st'>"."</span>,
  mode <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='st'>"cherry-pick"</span>, <span class='st'>"mirror"</span><span class='op'>)</span>
<span class='op'>)</span>

<span class='fu'>zip_append</span><span class='op'>(</span>
  <span class='va'>zipfile</span>,
  <span class='va'>files</span>,
  recurse <span class='op'>=</span> <span class='cn'>TRUE</span>,
  compression_level <span class='op'>=</span> <span class='fl'>9</span>,
  include_directories <span class='op'>=</span> <span class='cn'>TRUE</span>,
  root <span class='op'>=</span> <span class='st'>"."</span>,
  mode <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='st'>"mirror"</span>, <span class='st'>"cherry-pick"</span><span class='op'>)</span>
<span class='op'>)</span>

<span class='fu'>zipr_append</span><span class='op'>(</span>
  <span class='va'>zipfile</span>,
  <span class='va'>files</span>,
  recurse <span class='op'>=</span> <span class='cn'>TRUE</span>,
  compression_level <span class='op'>=</span> <span class='fl'>9</span>,
  include_directories <span class='op'>=</span> <span class='cn'>TRUE</span>,
  root <span class='op'>=</span> <span class='st'>"."</span>,
  mode <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='st'>"cherry-pick"</span>, <span class='st'>"mirror"</span><span class='op'>)</span>
<span class='op'>)</span></pre>

    <h2 class="hasAnchor" id="arguments"><a class="anchor" href="#arguments"></a>Arguments</h2>
    <table class="ref-arguments">
    <colgroup><col class="name" /><col class="desc" /></colgroup>
    <tr>
      <th>zipfile</th>
      <td><p>The zip file to create. If the file exists, <code>zip</code>
overwrites it, but <code>zip_append</code> appends to it.</p></td>
    </tr>
    <tr>
      <th>files</th>
      <td><p>List of file to add to the archive. See details below
about absolute and relative path names.</p></td>
    </tr>
    <tr>
      <th>recurse</th>
      <td><p>Whether to add the contents of directories recursively.</p></td>
    </tr>
    <tr>
      <th>compression_level</th>
      <td><p>A number between 1 and 9. 9 compresses best,
but it also takes the longest.</p></td>
    </tr>
    <tr>
      <th>include_directories</th>
      <td><p>Whether to explicitly include directories
in the archive. Including directories might confuse MS Office when
reading docx files, so set this to <code>FALSE</code> for creating them.</p></td>
    </tr>
    <tr>
      <th>root</th>
      <td><p>Change to this working directory before creating the
archive.</p></td>
    </tr>
    <tr>
      <th>mode</th>
      <td><p>Selects how files and directories are stored in
the archice. It can be <code>"mirror"</code> or <code>"cherry-pick"</code>.
See "Relative Paths" below for details.</p></td>
    </tr>
    </table>

    <h2 class="hasAnchor" id="value"><a class="anchor" href="#value"></a>Value</h2>

    <p>The name of the created zip file, invisibly.</p>
    <h2 class="hasAnchor" id="details"><a class="anchor" href="#details"></a>Details</h2>

    <p><code>zip_append()</code> appends compressed files to an existing 'zip' file.</p><h3 class='hasAnchor' id='arguments'><a class='anchor' href='#arguments'></a>Relative paths</h3>


<p><code>zip()</code> and <code>zip_append()</code> can run in two different modes: mirror
mode and cherry picking mode. They handle the specified <code>files</code>
differently.</p><h4 class='hasAnchor' id='arguments'><a class='anchor' href='#arguments'></a>Mirror mode</h4>


<p>Mirror mode is for creating the zip archive of a directory structure,
exactly as it is on the disk. The current working directory will
be the root of the archive, and the paths will be fully kept.
zip changes the current directory to <code>root</code> before creating the
archive.</p>
<p>(Absolute paths are also kept. Note that this might result
non-portable archives: some zip tools do not handle zip archives that
contain absolute file names, or file names that start with <code>../</code> or
<code>./</code>. zip warns you if this should happen.)</p>
<p>E.g. consider the following directory structure:<div class="r"></p><pre><span class='fu'><a href='https://rdrr.io/r/base/files2.html'>dir.create</a></span><span class='op'>(</span><span class='va'>tmp</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/tempfile.html'>tempfile</a></span><span class='op'>(</span><span class='op'>)</span><span class='op'>)</span>
<span class='va'>oldwd</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/getwd.html'>getwd</a></span><span class='op'>(</span><span class='op'>)</span>
<span class='fu'><a href='https://rdrr.io/r/base/getwd.html'>setwd</a></span><span class='op'>(</span><span class='va'>tmp</span><span class='op'>)</span>
<span class='fu'><a href='https://rdrr.io/r/base/files2.html'>dir.create</a></span><span class='op'>(</span><span class='st'>"foo/bar"</span>, recursive <span class='op'>=</span> <span class='cn'>TRUE</span><span class='op'>)</span>
<span class='fu'><a href='https://rdrr.io/r/base/files2.html'>dir.create</a></span><span class='op'>(</span><span class='st'>"foo/bar2"</span><span class='op'>)</span>
<span class='fu'><a href='https://rdrr.io/r/base/files2.html'>dir.create</a></span><span class='op'>(</span><span class='st'>"foo2"</span><span class='op'>)</span>
<span class='fu'><a href='https://rdrr.io/r/base/cat.html'>cat</a></span><span class='op'>(</span><span class='st'>"this is file1"</span>, file <span class='op'>=</span> <span class='st'>"foo/bar/file1"</span><span class='op'>)</span>
<span class='fu'><a href='https://rdrr.io/r/base/cat.html'>cat</a></span><span class='op'>(</span><span class='st'>"this is file2"</span>, file <span class='op'>=</span> <span class='st'>"foo/bar/file2"</span><span class='op'>)</span>
<span class='fu'><a href='https://rdrr.io/r/base/cat.html'>cat</a></span><span class='op'>(</span><span class='st'>"this is file3"</span>, file <span class='op'>=</span> <span class='st'>"foo2/file3"</span><span class='op'>)</span>
<span class='va'>out</span> <span class='op'>&lt;-</span> <span class='fu'>processx</span><span class='fu'>::</span><span class='fu'><a href='http://processx.r-lib.org/reference/run.html'>run</a></span><span class='op'>(</span><span class='st'>"tree"</span>, <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='st'>"--noreport"</span>, <span class='st'>"--charset=ascii"</span><span class='op'>)</span><span class='op'>)</span>
<span class='fu'><a href='https://rdrr.io/r/base/cat.html'>cat</a></span><span class='op'>(</span><span class='fu'>crayon</span><span class='fu'>::</span><span class='fu'><a href='https://rdrr.io/pkg/crayon/man/strip_style.html'>strip_style</a></span><span class='op'>(</span><span class='va'>out</span><span class='op'>$</span><span class='va'>stdout</span><span class='op'>)</span><span class='op'>)</span>
<span class='fu'><a href='https://rdrr.io/r/base/getwd.html'>setwd</a></span><span class='op'>(</span><span class='va'>oldwd</span><span class='op'>)</span>
</pre><p></div></p>
<p>Assuming the current working directory is <code>foo</code>, the following zip
entries are created by <code>zip</code>:<div class="r"></p><pre><span class='fu'><a href='https://rdrr.io/r/base/getwd.html'>setwd</a></span><span class='op'>(</span><span class='va'>tmp</span><span class='op'>)</span>
<span class='fu'><a href='https://rdrr.io/r/base/getwd.html'>setwd</a></span><span class='op'>(</span><span class='st'>"foo"</span><span class='op'>)</span>
<span class='fu'>zippr</span><span class='fu'>::</span><span class='fu'>zip</span><span class='op'>(</span><span class='st'>"../test.zip"</span>, <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='st'>"bar/file1"</span>, <span class='st'>"bar2"</span>, <span class='st'>"../foo2"</span><span class='op'>)</span><span class='op'>)</span>
<span class='fu'><a href='zip_list.html'>zip_list</a></span><span class='op'>(</span><span class='st'>"../test.zip"</span><span class='op'>)</span><span class='op'>[</span>, <span class='st'>"filename"</span>, drop <span class='op'>=</span> <span class='cn'>FALSE</span><span class='op'>]</span>
<span class='fu'><a href='https://rdrr.io/r/base/getwd.html'>setwd</a></span><span class='op'>(</span><span class='va'>oldwd</span><span class='op'>)</span>
</pre><p></div></p>

<h4 class='hasAnchor' id='arguments'><a class='anchor' href='#arguments'></a>Cherry picking mode</h4>


<p>In cherry picking mode, the selected files and directories
will be at the root of the archive. This mode is handy if you
want to select a subset of files and directories, possibly from
different paths and put all of the in the archive, at the top
level.</p>
<p>Here is an example with the same directory structure as above:<div class="r"></p><pre><span class='fu'><a href='https://rdrr.io/r/base/getwd.html'>setwd</a></span><span class='op'>(</span><span class='va'>tmp</span><span class='op'>)</span>
<span class='fu'><a href='https://rdrr.io/r/base/getwd.html'>setwd</a></span><span class='op'>(</span><span class='st'>"foo"</span><span class='op'>)</span>
<span class='fu'>zippr</span><span class='fu'>::</span><span class='fu'>zip</span><span class='op'>(</span>
  <span class='st'>"../test2.zip"</span>,
  <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='st'>"bar/file1"</span>, <span class='st'>"bar2"</span>, <span class='st'>"../foo2"</span><span class='op'>)</span>,
  mode <span class='op'>=</span> <span class='st'>"cherry-pick"</span>
<span class='op'>)</span>
<span class='fu'><a href='zip_list.html'>zip_list</a></span><span class='op'>(</span><span class='st'>"../test2.zip"</span><span class='op'>)</span><span class='op'>[</span>, <span class='st'>"filename"</span>, drop <span class='op'>=</span> <span class='cn'>FALSE</span><span class='op'>]</span>
<span class='fu'><a href='https://rdrr.io/r/base/getwd.html'>setwd</a></span><span class='op'>(</span><span class='va'>oldwd</span><span class='op'>)</span>
</pre><p></div></p>



<h3 class='hasAnchor' id='arguments'><a class='anchor' href='#arguments'></a>Permissions:</h3>


<p><code>zip()</code> (and <code>zip_append()</code>, etc.) add the permissions of
the archived files and directories to the ZIP archive, on Unix systems.
Most zip and unzip implementations support these, so they will be
recovered after extracting the archive.</p>
<p>Note, however that the owner and group (uid and gid) are currently
omitted, even on Unix.</p>

<h3 class='hasAnchor' id='arguments'><a class='anchor' href='#arguments'></a><code>zipr()</code> and <code>zipr_append()</code></h3>


<p>These function exist for historical reasons. They are identical
to <code>zip()</code> and <code>zipr_append()</code> with a different default for the
<code>mode</code> argument.</p>


    <h2 class="hasAnchor" id="examples"><a class="anchor" href="#examples"></a>Examples</h2>
    <pre class="examples"><div class='input'><span class='co'>## Some files to zip up. We will run all this in the R sesion's</span>
<span class='co'>## temporary directory, to avoid messing up the user's workspace.</span>
<span class='fu'><a href='https://rdrr.io/r/base/files2.html'>dir.create</a></span><span class='op'>(</span><span class='va'>tmp</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/tempfile.html'>tempfile</a></span><span class='op'>(</span><span class='op'>)</span><span class='op'>)</span>
<span class='fu'><a href='https://rdrr.io/r/base/files2.html'>dir.create</a></span><span class='op'>(</span><span class='fu'><a href='https://rdrr.io/r/base/file.path.html'>file.path</a></span><span class='op'>(</span><span class='va'>tmp</span>, <span class='st'>"mydir"</span><span class='op'>)</span><span class='op'>)</span>
<span class='fu'><a href='https://rdrr.io/r/base/cat.html'>cat</a></span><span class='op'>(</span><span class='st'>"first file"</span>, file <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/file.path.html'>file.path</a></span><span class='op'>(</span><span class='va'>tmp</span>, <span class='st'>"mydir"</span>, <span class='st'>"file1"</span><span class='op'>)</span><span class='op'>)</span>
<span class='fu'><a href='https://rdrr.io/r/base/cat.html'>cat</a></span><span class='op'>(</span><span class='st'>"second file"</span>, file <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/file.path.html'>file.path</a></span><span class='op'>(</span><span class='va'>tmp</span>, <span class='st'>"mydir"</span>, <span class='st'>"file2"</span><span class='op'>)</span><span class='op'>)</span>

<span class='va'>zipfile</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/tempfile.html'>tempfile</a></span><span class='op'>(</span>fileext <span class='op'>=</span> <span class='st'>".zip"</span><span class='op'>)</span>
<span class='fu'>zippr</span><span class='fu'>::</span><span class='fu'>zip</span><span class='op'>(</span><span class='va'>zipfile</span>, <span class='st'>"mydir"</span>, root <span class='op'>=</span> <span class='va'>tmp</span><span class='op'>)</span>

<span class='co'>## List contents</span>
<span class='fu'><a href='zip_list.html'>zip_list</a></span><span class='op'>(</span><span class='va'>zipfile</span><span class='op'>)</span>
</div><div class='output co'>#&gt;      filename compressed_size uncompressed_size           timestamp permissions
#&gt; 1      mydir/               0                 0 2021-02-07 05:23:28         777
#&gt; 2 mydir/file1              15                10 2021-02-07 05:23:28         666
#&gt; 3 mydir/file2              16                11 2021-02-07 05:23:28         666</div><div class='input'>
<span class='co'>## Add another file</span>
<span class='fu'><a href='https://rdrr.io/r/base/cat.html'>cat</a></span><span class='op'>(</span><span class='st'>"third file"</span>, file <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/file.path.html'>file.path</a></span><span class='op'>(</span><span class='va'>tmp</span>, <span class='st'>"mydir"</span>, <span class='st'>"file3"</span><span class='op'>)</span><span class='op'>)</span>
<span class='fu'>zip_append</span><span class='op'>(</span><span class='va'>zipfile</span>, <span class='fu'><a href='https://rdrr.io/r/base/file.path.html'>file.path</a></span><span class='op'>(</span><span class='st'>"mydir"</span>, <span class='st'>"file3"</span><span class='op'>)</span>, root <span class='op'>=</span> <span class='va'>tmp</span><span class='op'>)</span>
<span class='fu'><a href='zip_list.html'>zip_list</a></span><span class='op'>(</span><span class='va'>zipfile</span><span class='op'>)</span>
</div><div class='output co'>#&gt;      filename compressed_size uncompressed_size           timestamp permissions
#&gt; 1      mydir/               0                 0 2021-02-07 05:23:28         666
#&gt; 2 mydir/file1              15                10 2021-02-07 05:23:28         666
#&gt; 3 mydir/file2              16                11 2021-02-07 05:23:28         666
#&gt; 4 mydir/file3              15                10 2021-02-07 05:23:28         600</div></pre>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top">
      <h2 data-toc-skip>Contents</h2>
    </nav>
  </div>
</div>


      <footer>
      <div class="copyright">
  <p>Developed by Kiernan Nicholls, Gábor Csárdi, Kuba Podgórski, Rich Geldreich.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.6.1.</p>
</div>

      </footer>
   </div>

  


  </body>
</html>


